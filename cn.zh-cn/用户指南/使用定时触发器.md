# 使用定时触发器<a name="functiongraph_01_0207"></a>

本节介绍创建定时触发器，按照设置的频率，定期触发函数运行，供用户了解定时触发器的使用方法。

关于定时触发器事件源具体介绍请参见[支持的事件源](http://support.huaweicloud.com/devg-functiongraph/functiongraph_02_0102.html)。

## 前提条件<a name="section76949209512"></a>

进行操作之前，需要做好以下准备。

-   已经在函数工作流服务创建函数，创建过程请参考[代码上传方式创建HelloWorld函数](代码上传方式创建HelloWorld函数.md)。

## 创建定时触发器<a name="section16307115920125"></a>

1.  登录FunctionGraph，进入“函数”界面。
2.  在“函数”界面，选择“函数列表”，单击HelloWorld函数名称，进入HelloWorld函数详情界面。
3.  在HelloWorld函数详情界面，单击“触发器”页签。
4.  在“触发器”页签，单击“创建触发器”，如[图1](#fig19176131502019)所示，弹出“创建触发器”界面。

    **图 1**  创建定时触发器<a name="fig19176131502019"></a>  
    ![](figures/创建定时触发器.png "创建定时触发器")

5.  在“创建触发器”界面，触发器类型选择“定时触发器 \(TIMER\)”，填写触发器信息，如[表1](#table24155858113256)所示，带\*参数为必填项。

    **表 1**  定时触发器信息表

    <a name="table24155858113256"></a>
    <table><thead align="left"><tr id="row24918708113256"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p20123023113339"><a name="p20123023113339"></a><a name="p20123023113339"></a>字段</p>
    </th>
    <th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p19352141113339"><a name="p19352141113339"></a><a name="p19352141113339"></a>填写说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row30021527113256"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p15824598113256"><a name="p15824598113256"></a><a name="p15824598113256"></a>*定时器名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p0473163953314"><a name="p0473163953314"></a><a name="p0473163953314"></a>输入“Timer”。</p>
    </td>
    </tr>
    <tr id="row60516450113256"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p2885379113256"><a name="p2885379113256"></a><a name="p2885379113256"></a>*触发规则</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><a name="ul86177526204"></a><a name="ul86177526204"></a><ul id="ul86177526204"><li>固定频率<p id="p1868131392114"><a name="p1868131392114"></a><a name="p1868131392114"></a>固定时间间隔触发函数，该类型下支持配置单位为分、时、天，每种类型仅支持整数配置，其中分钟支持范围(0，60]，小时支持范围(0，24]，天支持范围(0，30]。</p>
    </li><li>Cron表达式<p id="p1571414428264"><a name="p1571414428264"></a><a name="p1571414428264"></a>可以完成更为复杂的函数执行计划：如周一到周五上午08:30:00执行函数等。请参考<a href="函数定时触发器Cron表达式规则.md">函数定时触发器Cron表达式规则</a>。</p>
    </li></ul>
    <p id="p151779495205"><a name="p151779495205"></a><a name="p151779495205"></a>选择固定频率，输入“1”，单位选择“分钟”。</p>
    </td>
    </tr>
    <tr id="row23066815113256"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p56472765113256"><a name="p56472765113256"></a><a name="p56472765113256"></a>是否开启</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10891263113256"><a name="p10891263113256"></a><a name="p10891263113256"></a>是否开启定时触发器，使用默认值“开启”。</p>
    </td>
    </tr>
    <tr id="row30912510113256"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p2161121313158"><a name="p2161121313158"></a><a name="p2161121313158"></a>附加信息</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p13991422113256"><a name="p13991422113256"></a><a name="p13991422113256"></a>如果用户配置了触发事件，会将该事件填写到TIMER事件源的"user_event"字段，详情请参考<a href="http://support.huaweicloud.com/devg-functiongraph/functiongraph_02_0102.html" target="_blank" rel="noopener noreferrer">支持的事件源</a>。</p>
    </td>
    </tr>
    </tbody>
    </table>

6.  单击“确定”，完成触发器创建，如[图2](#fig17618154116211)所示。

    **图 2**  Timer触发器<a name="fig17618154116211"></a>  
    ![](figures/Timer触发器.png "Timer触发器")

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >每隔1分钟，触发函数执行一次。  


## 查看函数运行结果<a name="section53081659181218"></a>

HelloWorld函数的定时触发器创建以后，每隔一分钟执行一次函数，可以查看函数运行日志。

1.  登录FunctionGraph，进入“函数”界面。
2.  在“函数”界面，选择“函数列表”，单击HelloWorld函数名称，进入HelloWorld函数详情界面。
3.  在HelloWorld函数详情界面，单击“日志”页签，查询函数运行日志。
4.  单击操作栏的“查看上下文”，查看日志详细信息。

