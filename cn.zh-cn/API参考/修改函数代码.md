# 修改函数代码<a name="functiongraph_06_0110"></a>

## 功能介绍<a name="section22761016184414"></a>

修改指定的函数的代码。

## URI<a name="section1327719164449"></a>

URL：/v1.0/\{project\_id\}/fss/functions/\{function\_urn\}/code

Method：PUT

参数说明如[表1](#table327861615448)所示。

**表 1**  参数说明

<a name="table327861615448"></a>
<table><thead align="left"><tr id="row144242162446"><th class="cellrowborder" valign="top" width="19.388061193880613%" id="mcps1.2.5.1.1"><p id="p164241216114415"><a name="p164241216114415"></a><a name="p164241216114415"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="14.288571142885711%" id="mcps1.2.5.1.2"><p id="p174248165443"><a name="p174248165443"></a><a name="p174248165443"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="14.288571142885711%" id="mcps1.2.5.1.3"><p id="p19424181614448"><a name="p19424181614448"></a><a name="p19424181614448"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="52.03479652034796%" id="mcps1.2.5.1.4"><p id="p3424141610442"><a name="p3424141610442"></a><a name="p3424141610442"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row13424816114416"><td class="cellrowborder" valign="top" width="19.388061193880613%" headers="mcps1.2.5.1.1 "><p id="p1742551611447"><a name="p1742551611447"></a><a name="p1742551611447"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="14.288571142885711%" headers="mcps1.2.5.1.2 "><p id="p74250166441"><a name="p74250166441"></a><a name="p74250166441"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="14.288571142885711%" headers="mcps1.2.5.1.3 "><p id="p14425121615447"><a name="p14425121615447"></a><a name="p14425121615447"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.03479652034796%" headers="mcps1.2.5.1.4 "><p id="p3425171610448"><a name="p3425171610448"></a><a name="p3425171610448"></a>Project Id。</p>
</td>
</tr>
<tr id="row2425201664411"><td class="cellrowborder" valign="top" width="19.388061193880613%" headers="mcps1.2.5.1.1 "><p id="p18425131624411"><a name="p18425131624411"></a><a name="p18425131624411"></a>function_urn</p>
</td>
<td class="cellrowborder" valign="top" width="14.288571142885711%" headers="mcps1.2.5.1.2 "><p id="p1042518164445"><a name="p1042518164445"></a><a name="p1042518164445"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="14.288571142885711%" headers="mcps1.2.5.1.3 "><p id="p16425101624411"><a name="p16425101624411"></a><a name="p16425101624411"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.03479652034796%" headers="mcps1.2.5.1.4 "><p id="p1442581604417"><a name="p1442581604417"></a><a name="p1442581604417"></a>函数的URN，详细解释见<a href="FunctionGraph函数模型.md#table4539774994724">表1 FunctionGraph函数字段说明表</a>的描述。</p>
</td>
</tr>
</tbody>
</table>

>![](public_sys-resources/icon-note.gif) **说明：**   
>各字段的详细解释请见[表1](FunctionGraph函数模型.md#table4539774994724)。  

## 请求消息<a name="section928917169443"></a>

**请求参数**

参数说明如[表2](#table1528912168442)所示。

**表 2**  参数说明表

<a name="table1528912168442"></a>
<table><thead align="left"><tr id="row174261616154417"><th class="cellrowborder" valign="top" width="19.191919191919194%" id="mcps1.2.5.1.1"><p id="p1842681617448"><a name="p1842681617448"></a><a name="p1842681617448"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="14.141414141414144%" id="mcps1.2.5.1.2"><p id="p15426131610445"><a name="p15426131610445"></a><a name="p15426131610445"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="12.121212121212121%" id="mcps1.2.5.1.3"><p id="p04261716114419"><a name="p04261716114419"></a><a name="p04261716114419"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="54.545454545454554%" id="mcps1.2.5.1.4"><p id="p1542615164442"><a name="p1542615164442"></a><a name="p1542615164442"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1642601619441"><td class="cellrowborder" valign="top" width="19.191919191919194%" headers="mcps1.2.5.1.1 "><p id="p742651614415"><a name="p742651614415"></a><a name="p742651614415"></a>CodeType</p>
</td>
<td class="cellrowborder" valign="top" width="14.141414141414144%" headers="mcps1.2.5.1.2 "><p id="p1742612165446"><a name="p1742612165446"></a><a name="p1742612165446"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.121212121212121%" headers="mcps1.2.5.1.3 "><p id="p194261816164420"><a name="p194261816164420"></a><a name="p194261816164420"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="54.545454545454554%" headers="mcps1.2.5.1.4 "><p id="p8426316114414"><a name="p8426316114414"></a><a name="p8426316114414"></a>函数代码类型，请参考<a href="FunctionGraph函数模型.md#table4539774994724">表1</a>。</p>
</td>
</tr>
<tr id="row3426151644418"><td class="cellrowborder" valign="top" width="19.191919191919194%" headers="mcps1.2.5.1.1 "><p id="p14261716114417"><a name="p14261716114417"></a><a name="p14261716114417"></a>CodeUrl</p>
</td>
<td class="cellrowborder" valign="top" width="14.141414141414144%" headers="mcps1.2.5.1.2 "><p id="p6426101610448"><a name="p6426101610448"></a><a name="p6426101610448"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.121212121212121%" headers="mcps1.2.5.1.3 "><p id="p154261816124420"><a name="p154261816124420"></a><a name="p154261816124420"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="54.545454545454554%" headers="mcps1.2.5.1.4 "><p id="p2042671644415"><a name="p2042671644415"></a><a name="p2042671644415"></a>函数代码包在OBS上的地址，当CodeType为OBS时该字段必选。</p>
</td>
</tr>
<tr id="row1535518203447"><td class="cellrowborder" valign="top" width="19.191919191919194%" headers="mcps1.2.5.1.1 "><p id="p153551620174415"><a name="p153551620174415"></a><a name="p153551620174415"></a>DependencyPkg</p>
</td>
<td class="cellrowborder" valign="top" width="14.141414141414144%" headers="mcps1.2.5.1.2 "><p id="p1935502054418"><a name="p1935502054418"></a><a name="p1935502054418"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.121212121212121%" headers="mcps1.2.5.1.3 "><p id="p103557200449"><a name="p103557200449"></a><a name="p103557200449"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="54.545454545454554%" headers="mcps1.2.5.1.4 "><p id="p12816329164214"><a name="p12816329164214"></a><a name="p12816329164214"></a>函数使用的第三方软件zip包在obs上的url地址。</p>
</td>
</tr>
<tr id="row64261516124410"><td class="cellrowborder" valign="top" width="19.191919191919194%" headers="mcps1.2.5.1.1 "><p id="p15426181612442"><a name="p15426181612442"></a><a name="p15426181612442"></a>FuncCode.File</p>
</td>
<td class="cellrowborder" valign="top" width="14.141414141414144%" headers="mcps1.2.5.1.2 "><p id="p1142717161445"><a name="p1142717161445"></a><a name="p1142717161445"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.121212121212121%" headers="mcps1.2.5.1.3 "><p id="p1142761644419"><a name="p1142761644419"></a><a name="p1142761644419"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="54.545454545454554%" headers="mcps1.2.5.1.4 "><p id="p194271916104410"><a name="p194271916104410"></a><a name="p194271916104410"></a>函数代码，当CodeTye为inline/zip/jar时必选，且代码必须要进行base64编码。</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

```
PUT
/v1.0/7aad83af3e8d42e99ac194e8419e2c9b/fss/functions/urn:fss:cn-north-1:7aad83af3e8d42e99ac194e8419e2c9b:function:default:test:latest/code HTTP/1.1
{
  "CodeType": "inline",
  "CodeUrl": "",
  "DependencyPkg": "",
  "FuncCode": {
    "File": "aW1wb3J0IGpzb24KZGVmIGhhbmRsZXIoZXZlbnQsIGNvbnRleHQpOgogICAgb3V0cHV0ID0gJ0hlbGxvIE1zZyBmb3IgbW9kaWZ5OiAnICsganNvbi5kdW1wcyhldmVudCkKICAgIGFrID0gY29udGV4dC5nZXRBY2Nlc3NLZXkoKQogICAgc2sgPSBjb250ZXh0LmdldFNlY3JldEtleSgpCiAgICB0b2tlbiA9IGNvbnRleHQuZ2V0VG9rZW4oKQogICAgcHJpbnQgJ2FrOicgKyBhawogICAgcHJpbnQgJ3NrOicgKyBzawogICAgcHJpbnQgJ3Rva2VuOicgKyB0b2tlbgogICAgcmV0dXJuIG91dHB1dAo="
  }
}
```

## 响应消息<a name="section1230451611448"></a>

**响应参数**

函数的metadata信息：JSON对象，表示指定函数的Code相关信息。

**响应示例**

成功时的返回格式：

```
HTTP / 1.1 200 OK 
{
	"CodeFileName": "index.js",
	"CodeSize": 273,
	"CodeType": "inline",
	"CodeUrl": "",
	"DependencyPkg": "",
	"Digest": "af40294713c964d24f52fd567022cb7e03373b8acfafc2526bacde08a864e21dd214ad4fe567cd8a6541822ee76171ca802da6e7d135c07689a6072930e09824",
	"FuncCode": {
		"File": "aW1wb3J0IGpzb24KZGVmIGhhbmRsZXIoZXZlbnQsIGNvbnRleHQpOgogICAgb3V0cHV0ID0gJ0hlbGxvIE1zZyBmb3IgbW9kaWZ5OiAnICsganNvbi5kdW1wcyhldmVudCkKICAgIGFrID0gY29udGV4dC5nZXRBY2Nlc3NLZXkoKQogICAgc2sgPSBjb250ZXh0LmdldFNlY3JldEtleSgpCiAgICB0b2tlbiA9IGNvbnRleHQuZ2V0VG9rZW4oKQogICAgcHJpbnQgJ2FrOicgKyBhawogICAgcHJpbnQgJ3NrOicgKyBzawogICAgcHJpbnQgJ3Rva2VuOicgKyB0b2tlbgogICAgcmV0dXJuIG91dHB1dAo="
	},
	"FuncName": "test",
	"FuncUrn": "urn:fss:cn-north-1:7aad83af3e8d42e99ac194e8419e2c9b:function:default:test:latest",
	"LastModified": "2018-02-26T11:55:41+08:00",
	"Runti

```

失败时的返回格式（示例）：

```
HTTP/1.1 404 Not Found
{
  "error_code": "FSS.1052",
  "error_msg": "Not found the function version"
 }
```

## 状态码<a name="section1230613168445"></a>

状态码说明如[表3](#table130610163443)所示。

**表 3**  状态码说明

<a name="table130610163443"></a>
<table><thead align="left"><tr id="row1042816165449"><th class="cellrowborder" valign="top" width="13.13%" id="mcps1.2.3.1.1"><p id="p742801684418"><a name="p742801684418"></a><a name="p742801684418"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="86.87%" id="mcps1.2.3.1.2"><p id="p0428116144410"><a name="p0428116144410"></a><a name="p0428116144410"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row10428916114418"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p11428111620442"><a name="p11428111620442"></a><a name="p11428111620442"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p9428716174410"><a name="p9428716174410"></a><a name="p9428716174410"></a>InvalidParameterValueException：输入参数错误。</p>
</td>
</tr>
<tr id="row742851613445"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p6428141614415"><a name="p6428141614415"></a><a name="p6428141614415"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p1842815161443"><a name="p1842815161443"></a><a name="p1842815161443"></a>UnauthorizedAccess：未授权的访问。</p>
</td>
</tr>
<tr id="row8590919104016"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p14590219194011"><a name="p14590219194011"></a><a name="p14590219194011"></a>403</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p1559081914015"><a name="p1559081914015"></a><a name="p1559081914015"></a>Forbidden：禁止访问。</p>
</td>
</tr>
<tr id="row1042816165444"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p1442891694418"><a name="p1442891694418"></a><a name="p1442891694418"></a>404</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p2428316184415"><a name="p2428316184415"></a><a name="p2428316184415"></a>ResourceNotFoundException：修改的函数没有找到。</p>
</td>
</tr>
<tr id="row1256774842014"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p14179142824616"><a name="p14179142824616"></a><a name="p14179142824616"></a>409</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p517912813469"><a name="p517912813469"></a><a name="p517912813469"></a>ResourceConflictException：函数已存在。</p>
</td>
</tr>
<tr id="row24281416154416"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p114281016154420"><a name="p114281016154420"></a><a name="p114281016154420"></a>429</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p9428121624411"><a name="p9428121624411"></a><a name="p9428121624411"></a>TooManyRequestsException：并发请求数太多。</p>
</td>
</tr>
<tr id="row44282166449"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p114281162448"><a name="p114281162448"></a><a name="p114281162448"></a>500</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p0428111654412"><a name="p0428111654412"></a><a name="p0428111654412"></a>InternalServerError：服务内部出错。</p>
</td>
</tr>
</tbody>
</table>

