# 创建函数<a name="functiongraph_06_0108"></a>

## 功能介绍<a name="section109991527124620"></a>

创建指定的函数。

## URI<a name="section160132819462"></a>

URL：/v1.0/\{project\_id\}/fss/functions

Method：POST

参数如[表1](#table7192815461)所示。

**表 1**  参数说明

<a name="table7192815461"></a>
<table><thead align="left"><tr id="row1717312884611"><th class="cellrowborder" valign="top" width="17.349999999999998%" id="mcps1.2.5.1.1"><p id="p1817332810469"><a name="p1817332810469"></a><a name="p1817332810469"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="16.33%" id="mcps1.2.5.1.2"><p id="p10173628134617"><a name="p10173628134617"></a><a name="p10173628134617"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="14.29%" id="mcps1.2.5.1.3"><p id="p1817310282468"><a name="p1817310282468"></a><a name="p1817310282468"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="52.03%" id="mcps1.2.5.1.4"><p id="p91731428154615"><a name="p91731428154615"></a><a name="p91731428154615"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row121731328144619"><td class="cellrowborder" valign="top" width="17.349999999999998%" headers="mcps1.2.5.1.1 "><p id="p12173122824616"><a name="p12173122824616"></a><a name="p12173122824616"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="16.33%" headers="mcps1.2.5.1.2 "><p id="p31736289467"><a name="p31736289467"></a><a name="p31736289467"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.3 "><p id="p18173142810469"><a name="p18173142810469"></a><a name="p18173142810469"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.03%" headers="mcps1.2.5.1.4 "><p id="p1617332811466"><a name="p1617332811466"></a><a name="p1617332811466"></a>Project Id</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section452028144615"></a>

**表 2**  参数说明表

<a name="table176142874610"></a>
<table><thead align="left"><tr id="row917452844612"><th class="cellrowborder" valign="top" width="21.43%" id="mcps1.2.5.1.1"><p id="p9174628104620"><a name="p9174628104620"></a><a name="p9174628104620"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="14.29%" id="mcps1.2.5.1.2"><p id="p111742282467"><a name="p111742282467"></a><a name="p111742282467"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="12.24%" id="mcps1.2.5.1.3"><p id="p17174122824613"><a name="p17174122824613"></a><a name="p17174122824613"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="52.04%" id="mcps1.2.5.1.4"><p id="p17174172818461"><a name="p17174172818461"></a><a name="p17174172818461"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1717420285468"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p1117412813461"><a name="p1117412813461"></a><a name="p1117412813461"></a>FuncName</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p18174172884612"><a name="p18174172884612"></a><a name="p18174172884612"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p161741428134614"><a name="p161741428134614"></a><a name="p161741428134614"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p1917452854613"><a name="p1917452854613"></a><a name="p1917452854613"></a>函数名称。</p>
</td>
</tr>
<tr id="row17174828144616"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p101741328114616"><a name="p101741328114616"></a><a name="p101741328114616"></a>Package</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p11741028184610"><a name="p11741028184610"></a><a name="p11741028184610"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p517412812466"><a name="p517412812466"></a><a name="p517412812466"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p41745285465"><a name="p41745285465"></a><a name="p41745285465"></a>函数所属的分组，用户自定义名称，可默认填写：default。</p>
</td>
</tr>
<tr id="row1917472810464"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p1174128134618"><a name="p1174128134618"></a><a name="p1174128134618"></a>CodeType</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p1417414289463"><a name="p1417414289463"></a><a name="p1417414289463"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p617522864614"><a name="p617522864614"></a><a name="p617522864614"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p43048911"><a name="p43048911"></a><a name="p43048911"></a>函数代码类型，取值有4种：</p>
<p id="p51895880"><a name="p51895880"></a><a name="p51895880"></a>inline：UI在线编辑代码</p>
<p id="p64409739"><a name="p64409739"></a><a name="p64409739"></a>zip：函数代码为zip包</p>
<p id="p42816746"><a name="p42816746"></a><a name="p42816746"></a>jar：函数代码为jar包，主要针对Java函数</p>
<p id="p49806396"><a name="p49806396"></a><a name="p49806396"></a>obs：函数代码来源于obs存储</p>
</td>
</tr>
<tr id="row11751828144620"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p14175132884615"><a name="p14175132884615"></a><a name="p14175132884615"></a>CodeUrl</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p1417522834614"><a name="p1417522834614"></a><a name="p1417522834614"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p161751028144617"><a name="p161751028144617"></a><a name="p161751028144617"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p15175152874616"><a name="p15175152874616"></a><a name="p15175152874616"></a>当CodeType为OBS时必选，指函数代码包在OBS上的地址。</p>
</td>
</tr>
<tr id="row101750288462"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p141751028154616"><a name="p141751028154616"></a><a name="p141751028154616"></a>Description</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p181753288467"><a name="p181753288467"></a><a name="p181753288467"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p717519283466"><a name="p717519283466"></a><a name="p717519283466"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p417515288460"><a name="p417515288460"></a><a name="p417515288460"></a>函数的描述。</p>
</td>
</tr>
<tr id="row193371652312"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p15338468236"><a name="p15338468236"></a><a name="p15338468236"></a>CodeFileName</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p73391163232"><a name="p73391163232"></a><a name="p73391163232"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p9339136202311"><a name="p9339136202311"></a><a name="p9339136202311"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p15339666239"><a name="p15339666239"></a><a name="p15339666239"></a>代码的文件名，当CodeType为jar/zip时必须提供该字段，inline和obs不需要提供。</p>
</td>
</tr>
<tr id="row171754286466"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p21751128194615"><a name="p21751128194615"></a><a name="p21751128194615"></a>Handler</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p8176828164611"><a name="p8176828164611"></a><a name="p8176828164611"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p61761228204614"><a name="p61761228204614"></a><a name="p61761228204614"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p13176528134613"><a name="p13176528134613"></a><a name="p13176528134613"></a>函数执行入口。</p>
</td>
</tr>
<tr id="row12176112804616"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p117613281466"><a name="p117613281466"></a><a name="p117613281466"></a>MemorySize</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p2017682894612"><a name="p2017682894612"></a><a name="p2017682894612"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p9176728124615"><a name="p9176728124615"></a><a name="p9176728124615"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p4176172815468"><a name="p4176172815468"></a><a name="p4176172815468"></a>函数消耗的内存，单位M，取值为128的整数倍，最小值为128，最大值为1536。</p>
</td>
</tr>
<tr id="row16176192894617"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p1517632817462"><a name="p1517632817462"></a><a name="p1517632817462"></a>Runtime</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p817672812465"><a name="p817672812465"></a><a name="p817672812465"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p10176132834618"><a name="p10176132834618"></a><a name="p10176132834618"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p1893873718203"><a name="p1893873718203"></a><a name="p1893873718203"></a>函数的执行环境，取值：Node.js6.10、Node.js8.10、Python2.7、Python3.6、Java8、Go1.8、C#.NET Core 2.0、C#.NET Core 2.1。</p>
</td>
</tr>
<tr id="row10176112811467"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p4176428204617"><a name="p4176428204617"></a><a name="p4176428204617"></a>Timeout</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p151761828184620"><a name="p151761828184620"></a><a name="p151761828184620"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p817662844614"><a name="p817662844614"></a><a name="p817662844614"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p717622813462"><a name="p717622813462"></a><a name="p717622813462"></a>函数的超时时间，范围3～300秒。</p>
</td>
</tr>
<tr id="row11176428184610"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p13177132874612"><a name="p13177132874612"></a><a name="p13177132874612"></a>UserData</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p10177928134611"><a name="p10177928134611"></a><a name="p10177928134611"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p131777287467"><a name="p131777287467"></a><a name="p131777287467"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p14177428174614"><a name="p14177428174614"></a><a name="p14177428174614"></a>用户自定义的name/value信息。</p>
</td>
</tr>
<tr id="row178151629194212"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p12816729124215"><a name="p12816729124215"></a><a name="p12816729124215"></a>DependencyPkg</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p1981682918423"><a name="p1981682918423"></a><a name="p1981682918423"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p58161529114213"><a name="p58161529114213"></a><a name="p58161529114213"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p12816329164214"><a name="p12816329164214"></a><a name="p12816329164214"></a>函数使用的第三方软件zip包在obs上的url地址。</p>
</td>
</tr>
<tr id="row717713281463"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p5177132811468"><a name="p5177132811468"></a><a name="p5177132811468"></a>Xrole</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p151771428144615"><a name="p151771428144615"></a><a name="p151771428144615"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p8177112814467"><a name="p8177112814467"></a><a name="p8177112814467"></a>可选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p3177628114610"><a name="p3177628114610"></a><a name="p3177628114610"></a>如函数需要访问其他云服务，则必填。</p>
</td>
</tr>
<tr id="row15177728194618"><td class="cellrowborder" valign="top" width="21.43%" headers="mcps1.2.5.1.1 "><p id="p1817752817467"><a name="p1817752817467"></a><a name="p1817752817467"></a>FuncCode.File</p>
</td>
<td class="cellrowborder" valign="top" width="14.29%" headers="mcps1.2.5.1.2 "><p id="p1017792817461"><a name="p1017792817461"></a><a name="p1017792817461"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="12.24%" headers="mcps1.2.5.1.3 "><p id="p21772289469"><a name="p21772289469"></a><a name="p21772289469"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="52.04%" headers="mcps1.2.5.1.4 "><p id="p1177102817469"><a name="p1177102817469"></a><a name="p1177102817469"></a>函数代码，当CodeTye为inline/zip/jar时必选，且代码必须要进行base64编码。</p>
</td>
</tr>
</tbody>
</table>

>![](public_sys-resources/icon-note.gif) **说明：**   
>各字段的详细解释请见[表1](FunctionGraph函数模型.md#table4539774994724)。  

**请求示例**

```
POST /v1.0/7aad83af3e8d42e99ac194e8419e2c9b/fss/functions HTTP/1.1
{
  "FuncName": "testf",
  "Package": "default",
  "Description": "",
  "Handler": "test.handler",
  "MemorySize": 128,
  "Timeout": 3,
  "Runtime": "Python2.7",
  "UserData": "",
  "CodeType": "inline",
  "FuncCode": {
    "File": "aW1wb3J0IGpzb24KZGVmIGhhbmRsZXIgKGV2ZW50LCBjb250ZXh0KToKICAgIG91dHB1dCA9ICdIZWxsbyBtZXNzYWdlOiAnICsganNvbi5kdW1wcyhldmVudCkKICAgIHJldHVybiBvdXRwdXQ="
  }
}
```

## 响应消息<a name="section1439122844611"></a>

**响应参数**

函数的metadata信息：JSON对象，表示指定函数的metadata信息。

**响应示例**

成功时的返回格式：

```
HTTP / 1.1 200 OK
 {
	"CodeFileName": "test.py",
	"CodeSize": 110,
	"CodeType": "inline",
	"CodeUrl": "",
	"Cpu": 300,
	"DependencyPkg": "",
	"Description": "",
	"Digest": "1c8610d1870731a818a037f1d2adf3223e8ac351aeb293fb1f8eabd2e9820069a61ed8b5d38182e760adc33a307d0e957afc357f415cd8c9c3ff6f0426fd85cd",
	"FuncName": "testfunc",
	"FuncUrn": "urn:fss:cn-hk1:7aad83af3e8d42e99ac194e8419e2c9b:function:default:testfunc:latest",
	"Handler": "test.handler",
	"ImageName": "latest-kyfoz",
	"LastModified": "2018-03-27T10:39:53+08:00",
	"MemorySize": 128,
	"Namespace": "7aad83af3e8d42e99ac194e8419e2c9b",
	"Package": "default",
	"ProjectName": "cn-hk1",
	"Runtime": "Python",
	"Timeout": 3,
	"UserData": "",
	"UserDomain": "cff01_hk",
	"Version": "latest",
	"VersionDescription": "",
	"Xrole": ""
}
```

失败时的返回格式（示例）：

```
HTTP / 1.1 409 Conflict
 {
	"error_code": "FSS.1061",
	"error_msg": "The function has existed"
}
```

## 状态码<a name="section343328104614"></a>

状态码说明如[表3](#table1844182811465)所示。

**表 3**  状态码说明

<a name="table1844182811465"></a>
<table><thead align="left"><tr id="row31792288467"><th class="cellrowborder" valign="top" width="13.13%" id="mcps1.2.3.1.1"><p id="p817962884610"><a name="p817962884610"></a><a name="p817962884610"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="86.87%" id="mcps1.2.3.1.2"><p id="p151790286463"><a name="p151790286463"></a><a name="p151790286463"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row7179152864611"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p1917914280467"><a name="p1917914280467"></a><a name="p1917914280467"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p16179102884612"><a name="p16179102884612"></a><a name="p16179102884612"></a>CodeStorageExceededException：软件包超出大小，最大50M。</p>
<p id="p171791128164613"><a name="p171791128164613"></a><a name="p171791128164613"></a>InvalidParameterValueException：输入参数错误。</p>
</td>
</tr>
<tr id="row9179728154617"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p1217982817467"><a name="p1217982817467"></a><a name="p1217982817467"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p181791228194616"><a name="p181791228194616"></a><a name="p181791228194616"></a>UnauthorizedAccess：未授权的访问。</p>
</td>
</tr>
<tr id="row4179172814468"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p417972824618"><a name="p417972824618"></a><a name="p417972824618"></a>403</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p6179122804610"><a name="p6179122804610"></a><a name="p6179122804610"></a>Forbidden：禁止访问。</p>
</td>
</tr>
<tr id="row31799286468"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p14179142824616"><a name="p14179142824616"></a><a name="p14179142824616"></a>409</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p517912813469"><a name="p517912813469"></a><a name="p517912813469"></a>ResourceConflictException：函数已存在。</p>
</td>
</tr>
<tr id="row201791028194613"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p7179172820461"><a name="p7179172820461"></a><a name="p7179172820461"></a>429</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p1118042834614"><a name="p1118042834614"></a><a name="p1118042834614"></a>TooManyRequestsException：并发请求数太多。</p>
</td>
</tr>
<tr id="row1418082864620"><td class="cellrowborder" valign="top" width="13.13%" headers="mcps1.2.3.1.1 "><p id="p151802283462"><a name="p151802283462"></a><a name="p151802283462"></a>500</p>
</td>
<td class="cellrowborder" valign="top" width="86.87%" headers="mcps1.2.3.1.2 "><p id="p131808280462"><a name="p131808280462"></a><a name="p131808280462"></a>InternalServerError：服务内部出错。</p>
</td>
</tr>
</tbody>
</table>

