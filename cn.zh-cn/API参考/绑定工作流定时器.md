# 绑定工作流定时器<a name="ZH-CN_TOPIC_0115410489"></a>

## 功能介绍<a name="section51379511"></a>

创建一个定时器，并将其与工作流绑定。

>![](public_sys-resources/icon-note.gif) **说明：**   
>-   一个工作流下最多绑定5个定时器。  
>-   定时方式可以选择按固定频率或者按cron表达式。  

## URI<a name="section59762422"></a>

POST /v1.0/\{project\_id\}/cloud\_cron

参数说明如[表1](#table13216186)所示。    

**表 1**  参数说明

<a name="table13216186"></a>
<table><thead align="left"><tr id="row19124697"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p5596611"><a name="p5596611"></a><a name="p5596611"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p50672366"><a name="p50672366"></a><a name="p50672366"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p4085285"><a name="p4085285"></a><a name="p4085285"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row62472706"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p27124415"><a name="p27124415"></a><a name="p27124415"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p49593988"><a name="p49593988"></a><a name="p49593988"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p42387016"><a name="p42387016"></a><a name="p42387016"></a>租户ID</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section990892"></a>

**请求参数**

请求参数如[表2](#table63351959)所示。

**表 2**  请求参数

<a name="table63351959"></a>
<table><thead align="left"><tr id="row15085294"><th class="cellrowborder" valign="top" width="20.847915208479158%" id="mcps1.2.6.1.1"><p id="p13949281"><a name="p13949281"></a><a name="p13949281"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="14.788521147885215%" id="mcps1.2.6.1.2"><p id="p56149948"><a name="p56149948"></a><a name="p56149948"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20.847915208479158%" id="mcps1.2.6.1.3"><p id="p51851944"><a name="p51851944"></a><a name="p51851944"></a><em id="i64014316"><a name="i64014316"></a><a name="i64014316"></a>参数类型</em></p>
</th>
<th class="cellrowborder" valign="top" width="28.28717128287172%" id="mcps1.2.6.1.4"><p id="p17777075"><a name="p17777075"></a><a name="p17777075"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="15.228477152284775%" id="mcps1.2.6.1.5"><p id="p57487187144423"><a name="p57487187144423"></a><a name="p57487187144423"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row188376"><td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.1 "><p id="p2979223610542"><a name="p2979223610542"></a><a name="p2979223610542"></a>graph_urn</p>
</td>
<td class="cellrowborder" valign="top" width="14.788521147885215%" headers="mcps1.2.6.1.2 "><p id="p6436095510542"><a name="p6436095510542"></a><a name="p6436095510542"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.3 "><p id="p4585489910542"><a name="p4585489910542"></a><a name="p4585489910542"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="28.28717128287172%" headers="mcps1.2.6.1.4 "><p id="p800731610542"><a name="p800731610542"></a><a name="p800731610542"></a>工作流URN</p>
<p id="p4461288810542"><a name="p4461288810542"></a><a name="p4461288810542"></a></p>
</td>
<td class="cellrowborder" valign="top" width="15.228477152284775%" headers="mcps1.2.6.1.5 "><p id="p25950586144423"><a name="p25950586144423"></a><a name="p25950586144423"></a>-</p>
</td>
</tr>
<tr id="row49585950"><td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.1 "><p id="p4210554110542"><a name="p4210554110542"></a><a name="p4210554110542"></a>cron_trigger_name</p>
</td>
<td class="cellrowborder" valign="top" width="14.788521147885215%" headers="mcps1.2.6.1.2 "><p id="p5510569510542"><a name="p5510569510542"></a><a name="p5510569510542"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.3 "><p id="p3437633810542"><a name="p3437633810542"></a><a name="p3437633810542"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="28.28717128287172%" headers="mcps1.2.6.1.4 "><p id="p2874430210542"><a name="p2874430210542"></a><a name="p2874430210542"></a>定时器名称</p>
</td>
<td class="cellrowborder" valign="top" width="15.228477152284775%" headers="mcps1.2.6.1.5 "><p id="p21622750144423"><a name="p21622750144423"></a><a name="p21622750144423"></a>格式为^[0-9a-zA-Z][0-9a-zA-Z-_]{0,31}</p>
</td>
</tr>
<tr id="row53994596"><td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.1 "><p id="p491723210542"><a name="p491723210542"></a><a name="p491723210542"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="14.788521147885215%" headers="mcps1.2.6.1.2 "><p id="p6275154110542"><a name="p6275154110542"></a><a name="p6275154110542"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.3 "><p id="p4971008310542"><a name="p4971008310542"></a><a name="p4971008310542"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="28.28717128287172%" headers="mcps1.2.6.1.4 "><p id="p6697293710542"><a name="p6697293710542"></a><a name="p6697293710542"></a>定时器的描述</p>
<p id="p5609883510542"><a name="p5609883510542"></a><a name="p5609883510542"></a></p>
</td>
<td class="cellrowborder" valign="top" width="15.228477152284775%" headers="mcps1.2.6.1.5 "><p id="p2756233310250"><a name="p2756233310250"></a><a name="p2756233310250"></a>长度最小为0，且最长为256，可以是数字、大小写字母以及英文的逗号，句号，冒号，中划线,，下划线，空格</p>
</td>
</tr>
<tr id="row746176610537"><td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.1 "><p id="p2675281310542"><a name="p2675281310542"></a><a name="p2675281310542"></a>expression</p>
</td>
<td class="cellrowborder" valign="top" width="14.788521147885215%" headers="mcps1.2.6.1.2 "><p id="p1949426910542"><a name="p1949426910542"></a><a name="p1949426910542"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.3 "><p id="p3553197410542"><a name="p3553197410542"></a><a name="p3553197410542"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="28.28717128287172%" headers="mcps1.2.6.1.4 "><p id="p6589648710542"><a name="p6589648710542"></a><a name="p6589648710542"></a>定时器的表达式，按cron表达式定义时必选</p>
</td>
<td class="cellrowborder" valign="top" width="15.228477152284775%" headers="mcps1.2.6.1.5 "><p id="p65836411144423"><a name="p65836411144423"></a><a name="p65836411144423"></a>六位或五位，分钟级(规则详见<a href="工作流定时器Cron表达式规则.md">工作流定时器Cron表达式规则</a>)</p>
</td>
</tr>
<tr id="row3250897810533"><td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.1 "><p id="p1551775610542"><a name="p1551775610542"></a><a name="p1551775610542"></a>simple_trigger</p>
</td>
<td class="cellrowborder" valign="top" width="14.788521147885215%" headers="mcps1.2.6.1.2 "><p id="p4897874310542"><a name="p4897874310542"></a><a name="p4897874310542"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20.847915208479158%" headers="mcps1.2.6.1.3 "><p id="p785525910542"><a name="p785525910542"></a><a name="p785525910542"></a>字典数据结构</p>
</td>
<td class="cellrowborder" valign="top" width="28.28717128287172%" headers="mcps1.2.6.1.4 "><p id="p6585593110542"><a name="p6585593110542"></a><a name="p6585593110542"></a>定时器的表达式，定时器按固定频率定义时必选</p>
<p id="p3273018410542"><a name="p3273018410542"></a><a name="p3273018410542"></a>具体请参见<a href="#table40472136144738">表3</a>。</p>
</td>
<td class="cellrowborder" valign="top" width="15.228477152284775%" headers="mcps1.2.6.1.5 "><p id="p31149060144423"><a name="p31149060144423"></a><a name="p31149060144423"></a>-</p>
</td>
</tr>
</tbody>
</table>

**表 3**  simple\_trigger结构体定义

<a name="table40472136144738"></a>
<table><thead align="left"><tr id="row10774356144738"><th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.6.1.1"><p id="p307681144738"><a name="p307681144738"></a><a name="p307681144738"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="9.180000000000001%" id="mcps1.2.6.1.2"><p id="p24922190144738"><a name="p24922190144738"></a><a name="p24922190144738"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.6.1.3"><p id="p5431491144738"><a name="p5431491144738"></a><a name="p5431491144738"></a><em id="i48883425144738"><a name="i48883425144738"></a><a name="i48883425144738"></a>参数类型</em></p>
</th>
<th class="cellrowborder" valign="top" width="30.61%" id="mcps1.2.6.1.4"><p id="p134454144738"><a name="p134454144738"></a><a name="p134454144738"></a>说明</p>
</th>
<th class="cellrowborder" valign="top" width="29.59%" id="mcps1.2.6.1.5"><p id="p10890791144738"><a name="p10890791144738"></a><a name="p10890791144738"></a>约束</p>
</th>
</tr>
</thead>
<tbody><tr id="row9738910144738"><td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.1 "><p id="p50654208144738"><a name="p50654208144738"></a><a name="p50654208144738"></a>unit</p>
</td>
<td class="cellrowborder" valign="top" width="9.180000000000001%" headers="mcps1.2.6.1.2 "><p id="p9350199144738"><a name="p9350199144738"></a><a name="p9350199144738"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.3 "><p id="p19168683144738"><a name="p19168683144738"></a><a name="p19168683144738"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="30.61%" headers="mcps1.2.6.1.4 "><p id="p15326560144738"><a name="p15326560144738"></a><a name="p15326560144738"></a>固定频率单位</p>
</td>
<td class="cellrowborder" valign="top" width="29.59%" headers="mcps1.2.6.1.5 "><p id="p33491882144738"><a name="p33491882144738"></a><a name="p33491882144738"></a>只能为hour、minute或day中的一个</p>
</td>
</tr>
<tr id="row32991489144738"><td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.1 "><p id="p55064951144738"><a name="p55064951144738"></a><a name="p55064951144738"></a>interval</p>
</td>
<td class="cellrowborder" valign="top" width="9.180000000000001%" headers="mcps1.2.6.1.2 "><p id="p31076017144738"><a name="p31076017144738"></a><a name="p31076017144738"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.3 "><p id="p34129431144738"><a name="p34129431144738"></a><a name="p34129431144738"></a>Int</p>
</td>
<td class="cellrowborder" valign="top" width="30.61%" headers="mcps1.2.6.1.4 "><p id="p50076203144738"><a name="p50076203144738"></a><a name="p50076203144738"></a>固定频率间隔</p>
</td>
<td class="cellrowborder" valign="top" width="29.59%" headers="mcps1.2.6.1.5 "><p id="p29640672144738"><a name="p29640672144738"></a><a name="p29640672144738"></a>-</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="section8918034"></a>

**响应参数**

响应参数如[表4](#table77026151513)所示。    

**表 4**  响应参数

<a name="table77026151513"></a>
<table><thead align="left"><tr id="row1970213119159"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p117023121517"><a name="p117023121517"></a><a name="p117023121517"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p970211161518"><a name="p970211161518"></a><a name="p970211161518"></a><em id="i157021515159"><a name="i157021515159"></a><a name="i157021515159"></a>参数类型</em></p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p970231141517"><a name="p970231141517"></a><a name="p970231141517"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1770212116155"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p55764216145720"><a name="p55764216145720"></a><a name="p55764216145720"></a>cron_trigger_urn</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p20607625145720"><a name="p20607625145720"></a><a name="p20607625145720"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p57682592145720"><a name="p57682592145720"></a><a name="p57682592145720"></a>定时器的URN标识</p>
</td>
</tr>
<tr id="row26906402145716"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p40460921145720"><a name="p40460921145720"></a><a name="p40460921145720"></a>created_at</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p56109197145720"><a name="p56109197145720"></a><a name="p56109197145720"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p34306802145720"><a name="p34306802145720"></a><a name="p34306802145720"></a>定时器创建的时间</p>
</td>
</tr>
</tbody>
</table>

## 示例<a name="section694224419341"></a>

**请求示例**

-   按cron表达式定义示例

```
{
    "graph_urn":"urn:fgs:cn-north-1:7aad83af3e8d42e99ac194e8419e2c9b:graph:devops-test-graph",
    "cron_trigger_name":"name1",
    "description":"test1",
    "expression": "0/1 * * * ?"
}
```

-   按固定频率定义示例

```
{
    "graph_urn":"urn:fgs:cn-north-1:7aad83af3e8d42e99ac194e8419e2c9b:graph:devops-test-graph",
    "cron_trigger_name":"name2",
    "description":"test2",
    "simple_trigger": {
        "interval":1,
        "unit":"hour"
    }
}
```

**响应示例**：

```
{
    "cron_trigger_urn": "urn:fgs:cn-north-1:7aad83af3e8d42e99ac194e8419e2c9b:cron:devops-test-graph:name0101",
    "created_at": "2017-12-22T09:38:28.896Z"
}
```

## 返回值<a name="section370272717123"></a>

状态码请参见[状态码](状态码.md)。

