# 查询工作流定时器<a name="functiongraph_06_1450"></a>

## 功能介绍<a name="section51379511"></a>

查询与一个工作流绑定的所有定时器列表。

## URI<a name="section59762422"></a>

GET /v1.0/\{project\_id\}/cloud\_cron/\{graph\_urn\}

参数说明如[表1](#table13216186)所示。   

**表 1**  参数说明

<a name="table13216186"></a>
<table><thead align="left"><tr id="row19124697"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p5596611"><a name="p5596611"></a><a name="p5596611"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p50672366"><a name="p50672366"></a><a name="p50672366"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p4085285"><a name="p4085285"></a><a name="p4085285"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row62472706"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p27124415"><a name="p27124415"></a><a name="p27124415"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p49593988"><a name="p49593988"></a><a name="p49593988"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p42387016"><a name="p42387016"></a><a name="p42387016"></a>租户ID</p>
</td>
</tr>
<tr id="row60881563145923"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p710360153349"><a name="p710360153349"></a><a name="p710360153349"></a>graph_urn</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p57539189153349"><a name="p57539189153349"></a><a name="p57539189153349"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p27260784153349"><a name="p27260784153349"></a><a name="p27260784153349"></a>工作流URN</p>
</td>
</tr>
</tbody>
</table>

## 请求<a name="section990892"></a>

不涉及

## 响应<a name="section8918034"></a>

-   正常响应

    **响应参数**

    响应参数如[表2](#table77026151513)所示。   

    **表 2**  响应参数

    <a name="table77026151513"></a>
    <table><thead align="left"><tr id="row1970213119159"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p117023121517"><a name="p117023121517"></a><a name="p117023121517"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p970211161518"><a name="p970211161518"></a><a name="p970211161518"></a><em id="i157021515159"><a name="i157021515159"></a><a name="i157021515159"></a>参数类型</em></p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p970231141517"><a name="p970231141517"></a><a name="p970231141517"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1770212116155"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p25702546153440"><a name="p25702546153440"></a><a name="p25702546153440"></a>cron_triggers</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1531448153440"><a name="p1531448153440"></a><a name="p1531448153440"></a>列表数据结构</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p42684122153440"><a name="p42684122153440"></a><a name="p42684122153440"></a>为一个包含多个定时器信息的list</p>
    </td>
    </tr>
    <tr id="row10621744153435"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p45321294153440"><a name="p45321294153440"></a><a name="p45321294153440"></a>count</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p47146215153440"><a name="p47146215153440"></a><a name="p47146215153440"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p60747040153440"><a name="p60747040153440"></a><a name="p60747040153440"></a>满足过滤条件的工作流个数</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 3**  cron\_triggers结构体定义

    <a name="table436995815353"></a>
    <table><thead align="left"><tr id="row582677815353"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p220703715353"><a name="p220703715353"></a><a name="p220703715353"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p4455228815353"><a name="p4455228815353"></a><a name="p4455228815353"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p5196554715353"><a name="p5196554715353"></a><a name="p5196554715353"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row3252140415353"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p1698803415353"><a name="p1698803415353"></a><a name="p1698803415353"></a>created_at</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p3385351315353"><a name="p3385351315353"></a><a name="p3385351315353"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p5025817515353"><a name="p5025817515353"></a><a name="p5025817515353"></a>定时器的创建时间</p>
    </td>
    </tr>
    <tr id="row4967039215353"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p6387883315353"><a name="p6387883315353"></a><a name="p6387883315353"></a>cron_triggers_urn</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p680295415353"><a name="p680295415353"></a><a name="p680295415353"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p6040640615353"><a name="p6040640615353"></a><a name="p6040640615353"></a>定时器的URN</p>
    </td>
    </tr>
    <tr id="row678674915353"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p1285578315353"><a name="p1285578315353"></a><a name="p1285578315353"></a>description</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p3468552215353"><a name="p3468552215353"></a><a name="p3468552215353"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p5806391015353"><a name="p5806391015353"></a><a name="p5806391015353"></a>定时器的描述</p>
    </td>
    </tr>
    <tr id="row555623315353"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p4740176615353"><a name="p4740176615353"></a><a name="p4740176615353"></a>cron_status</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1433782715353"><a name="p1433782715353"></a><a name="p1433782715353"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p5040215815353"><a name="p5040215815353"></a><a name="p5040215815353"></a>定时器当前状态</p>
    </td>
    </tr>
    <tr id="row5096623815353"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p3462462015353"><a name="p3462462015353"></a><a name="p3462462015353"></a>simple_trigger</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p5313087515353"><a name="p5313087515353"></a><a name="p5313087515353"></a>字典数据结构</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p2823711515353"><a name="p2823711515353"></a><a name="p2823711515353"></a>定时器固定频率定义</p>
    </td>
    </tr>
    <tr id="row32412038153951"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p39341785153952"><a name="p39341785153952"></a><a name="p39341785153952"></a>cron_expression</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p32567993153952"><a name="p32567993153952"></a><a name="p32567993153952"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p52638350153952"><a name="p52638350153952"></a><a name="p52638350153952"></a>定时器cron表达式定义</p>
    </td>
    </tr>
    </tbody>
    </table>

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   定时器当前状态只会为RUNING、NOTRUNNING中的一个，分别代表已启用、已禁用。  
    >-   定时器按固定频率定义时，响应有simple\_trigger项，没有cron\_expression项；定时器按cron表达式定义时，响应中有cron\_expression项，没有simple\_trigger项。  

    **表 4**  simple\_trigger结构体定义

    <a name="table40472136144738"></a>
    <table><thead align="left"><tr id="row10774356144738"><th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.6.1.1"><p id="p307681144738"><a name="p307681144738"></a><a name="p307681144738"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="9.180000000000001%" id="mcps1.2.6.1.2"><p id="p24922190144738"><a name="p24922190144738"></a><a name="p24922190144738"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.6.1.3"><p id="p5431491144738"><a name="p5431491144738"></a><a name="p5431491144738"></a><em id="i48883425144738"><a name="i48883425144738"></a><a name="i48883425144738"></a>参数类型</em></p>
    </th>
    <th class="cellrowborder" valign="top" width="30.61%" id="mcps1.2.6.1.4"><p id="p134454144738"><a name="p134454144738"></a><a name="p134454144738"></a>说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="29.59%" id="mcps1.2.6.1.5"><p id="p10890791144738"><a name="p10890791144738"></a><a name="p10890791144738"></a>约束</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row9738910144738"><td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.1 "><p id="p50654208144738"><a name="p50654208144738"></a><a name="p50654208144738"></a>unit</p>
    </td>
    <td class="cellrowborder" valign="top" width="9.180000000000001%" headers="mcps1.2.6.1.2 "><p id="p9350199144738"><a name="p9350199144738"></a><a name="p9350199144738"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.3 "><p id="p19168683144738"><a name="p19168683144738"></a><a name="p19168683144738"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.61%" headers="mcps1.2.6.1.4 "><p id="p15326560144738"><a name="p15326560144738"></a><a name="p15326560144738"></a>固定频率单位</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.59%" headers="mcps1.2.6.1.5 "><p id="p33491882144738"><a name="p33491882144738"></a><a name="p33491882144738"></a>只能为hour、minute或day中的一个</p>
    </td>
    </tr>
    <tr id="row32991489144738"><td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.1 "><p id="p55064951144738"><a name="p55064951144738"></a><a name="p55064951144738"></a>interval</p>
    </td>
    <td class="cellrowborder" valign="top" width="9.180000000000001%" headers="mcps1.2.6.1.2 "><p id="p31076017144738"><a name="p31076017144738"></a><a name="p31076017144738"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.6.1.3 "><p id="p34129431144738"><a name="p34129431144738"></a><a name="p34129431144738"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="30.61%" headers="mcps1.2.6.1.4 "><p id="p50076203144738"><a name="p50076203144738"></a><a name="p50076203144738"></a>固定频率间隔</p>
    </td>
    <td class="cellrowborder" valign="top" width="29.59%" headers="mcps1.2.6.1.5 "><p id="p29640672144738"><a name="p29640672144738"></a><a name="p29640672144738"></a>-</p>
    </td>
    </tr>
    </tbody>
    </table>

    **响应样例**

    ```
    {
        "count": 2,
        "cron_triggers": [
            {
                "cron_trigger_urn": "urn:fgs:cn-north-1:9800716a0c604a8690963103a85754f0:cron:workflow-865a:Timer_72a1",
                "simple_trigger": {
                    "unit": "minute",
                    "interval": 1
                },
                "created_at": "2018-01-22T07:42:47.620Z",
                "cron_status": "NOTRUNNING",
                "description": ""
            },
            {
                "cron_trigger_urn": "urn:fgs:cn-north-1:9800716a0c604a8690963103a85754f0:cron:workflow-865a:Timer_3229",
                "cron_expression": "*/1 * * *     ",
                "created_at": "2018-01-22T07:43:01.420Z",
                "cron_status": "NOTRUNNING",
                "description": ""
            }
        ]
    }
    
    ```


-   异常响应

    请参考[异常响应](请求结果.md#section88241732388)。


## 返回值<a name="section370272717123"></a>

请参考[返回值](请求结果.md#section20306194210386)。

